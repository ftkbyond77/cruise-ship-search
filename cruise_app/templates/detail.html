{% extends 'base.html' %}
{% block title %}{{ person.full_name|default:"Person Details" }}{% endblock %}

{% block content %}
  {% if error %}
    <p style="color: red;">{{ error }}</p>
  {% else %}
    <h2>{{ person.full_name }}</h2>
    <ul>
      <li><strong>Crew ID:</strong> {{ person.crew_id_number }}</li>
      <li><strong>Passport:</strong> {{ person.passport_number }}</li>
      <li><strong>Birth Date:</strong> {{ person.birth_date|date:"Y-m-d" }}</li>
      <li><strong>Gender:</strong> {{ person.gender }}</li>
      <li><strong>Nationality:</strong> {{ person.nationality }}</li>
      <li><strong>Position:</strong> {{ person.position }}</li>
      <li><strong>Address (PH):</strong> {{ person.address_philippines }}</li>
      <li><strong>Address (USA):</strong> {{ person.address_usa }}</li>
      <li><strong>CBP Permit Expire:</strong> {{ person.cbp_permit_expire|date:"Y-m-d" }}</li>
    </ul>

    <h3>ภาพจาก MongoDB (ID Card Front)</h3>
    {% for image in person.images %}
      {% if image.type == "ID_CARD_FRONT" %}
        <div style="margin-bottom: 20px;">
          <img src="/media/{{ image.path }}" alt="ID Card of {{ person.crew_id_number }}" width="300"
               style="border: 1px solid #ddd; border-radius: 4px;">
          <p>อัปโหลดเมื่อ: {{ image.uploaded_at|date:"Y-m-d H:i:s" }}</p>
        </div>
      {% endif %}
    {% empty %}
      <p>ยังไม่มีภาพ ID Card อัปโหลด</p>
    {% endfor %}
  {% endif %}
{% endblock %}
